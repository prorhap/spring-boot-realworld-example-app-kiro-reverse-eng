# Use-Case Specifications - 출판 컨텍스트

## 개요

이 문서는 출판(Publishing) 컨텍스트의 Use-Case 상세 명세를 Unified Process 표준에 따라 작성합니다.

---

## UC-P1: 기사 작성

### Brief Description
저자가 새로운 기사를 작성하여 플랫폼에 발행하는 과정

### Actors
- **Primary**: 저자 (Author)
- **Secondary**: 시스템 (System)

### Preconditions
- 저자가 로그인되어 있어야 함

### Postconditions
- **Success**: 새로운 기사가 발행됨, 피드에 노출됨
- **Failure**: 발행 실패, 오류 메시지 표시

### Basic Flow
1. 저자가 기사 작성 페이지에 접근한다
2. 시스템이 작성 양식을 표시한다
3. 저자가 기사 정보를 입력한다:
   - 제목 (필수)
   - 설명 (필수)
   - 본문 (필수)
   - 태그 목록 (선택)
4. 저자가 발행 버튼을 클릭한다
5. 시스템이 입력 정보의 유효성을 검증한다
6. 시스템이 제목 중복 여부를 확인한다
7. 시스템이 제목으로부터 슬러그를 생성한다
8. 시스템이 태그 목록에서 중복을 제거한다
9. 시스템이 현재 시각을 발행 시각으로 설정한다
10. 시스템이 기사를 저장한다
11. 시스템이 태그 색인을 업데이트한다
12. 시스템이 팔로워의 피드에 기사를 추가한다
13. 시스템이 발행된 기사 정보를 반환한다
14. Use-Case 종료

### Alternative Flows

#### AF1: 제목 중복
- **Trigger**: Step 6에서 동일한 제목의 기사가 이미 존재하는 경우
- **Flow**:
  1. 시스템이 "동일한 제목의 기사가 이미 존재합니다" 오류 메시지를 표시한다
  2. Step 3으로 돌아간다

#### AF2: 필수 항목 누락
- **Trigger**: Step 5에서 제목, 설명, 본문 중 하나라도 누락된 경우
- **Flow**:
  1. 시스템이 "필수 항목을 입력해주세요" 오류 메시지를 표시한다
  2. Step 3으로 돌아간다

#### AF3: 태그 없이 발행
- **Trigger**: Step 3에서 태그를 입력하지 않은 경우
- **Flow**:
  1. Step 8에서 빈 태그 목록으로 처리한다
  2. Basic Flow를 계속 진행한다

### Business Rules
- **BR-P1.1**: 슬러그는 제목을 소문자로 변환하고 특수문자를 하이픈(-)으로 치환하여 생성됨
- **BR-P1.2**: 태그는 중복 없이 저장됨
- **BR-P1.3**: 발행 시각과 수정 시각은 동일하게 설정됨
- **BR-P1.4**: 기사는 발행 즉시 팔로워의 피드에 노출됨

### Special Requirements
- **SR-P1.1**: 슬러그는 URL에 사용되므로 URL-safe 문자만 포함해야 함

### Related Use Cases
- **Includes**: UC-M2 (로그인)
- **Triggers**: UC-C1 (피드 조회) - 팔로워의 피드 갱신

### Notes
- **프로세스 참조**: business-process-flows.md의 "프로세스 1: 저자의 기사 발행 여정"

---

## UC-P2: 기사 수정

### Brief Description
저자가 자신이 발행한 기사의 내용을 수정하는 과정

### Actors
- **Primary**: 저자 (Author)
- **Secondary**: 시스템 (System)

### Preconditions
- 저자가 로그인되어 있어야 함
- 수정하려는 기사가 존재해야 함
- 저자가 해당 기사의 작성자여야 함

### Postconditions
- **Success**: 기사 내용이 업데이트됨, 수정 시각이 갱신됨
- **Failure**: 수정 실패, 오류 메시지 표시

### Basic Flow
1. 저자가 자신의 기사를 조회한다
2. 저자가 수정 버튼을 클릭한다
3. 시스템이 현재 기사 내용을 표시한다
4. 저자가 수정할 정보를 입력한다 (선택적):
   - 제목
   - 설명
   - 본문
5. 저자가 저장 버튼을 클릭한다
6. 시스템이 저자 권한을 확인한다
7. 시스템이 변경된 항목을 식별한다
8. 시스템이 제목이 변경되었는지 확인한다
9. 시스템이 제목으로부터 슬러그를 재생성한다 (제목이 변경된 경우)
10. 시스템이 현재 시각을 수정 시각으로 설정한다
11. 시스템이 변경된 항목만 업데이트한다
12. 시스템이 기사를 저장한다
13. 시스템이 업데이트된 기사 정보를 반환한다
14. Use-Case 종료

### Alternative Flows

#### AF1: 기사가 존재하지 않음
- **Trigger**: Step 1에서 기사를 찾을 수 없는 경우
- **Flow**:
  1. 시스템이 "기사를 찾을 수 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

#### AF2: 권한 없음 (다른 저자의 기사)
- **Trigger**: Step 6에서 요청자가 기사 작성자가 아닌 경우
- **Flow**:
  1. 시스템이 "수정 권한이 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

#### AF3: 제목만 변경
- **Trigger**: Step 8에서 제목만 변경된 경우
- **Flow**:
  1. Step 9에서 슬러그를 재생성한다
  2. Step 10에서 수정 시각을 갱신한다
  3. Basic Flow를 계속 진행한다

#### AF4: 제목 외 항목만 변경
- **Trigger**: Step 8에서 제목이 변경되지 않은 경우
- **Flow**:
  1. Step 9를 건너뛴다 (슬러그 유지)
  2. Step 10에서 수정 시각을 갱신한다
  3. Basic Flow를 계속 진행한다

#### AF5: 아무것도 변경하지 않음
- **Trigger**: Step 7에서 변경된 항목이 없는 경우
- **Flow**:
  1. 시스템이 데이터베이스 업데이트를 건너뛴다
  2. 시스템이 현재 기사 정보를 반환한다
  3. Use-Case 종료

### Business Rules
- **BR-P2.1**: 기사는 작성자만 수정할 수 있음
- **BR-P2.2**: 제공되지 않은 항목은 기존 값을 유지함 (부분 수정 지원)
- **BR-P2.3**: 제목을 수정하면 슬러그도 자동으로 재생성됨
- **BR-P2.4**: 어떤 항목이든 수정되면 수정 시각이 현재 시각으로 갱신됨
- **BR-P2.5**: 태그는 수정할 수 없음 (현재 미구현)

### Special Requirements
- **SR-P2.1**: 제목 변경 시 슬러그가 변경되어 기존 URL이 무효화될 수 있음 (주의 필요)

### Related Use Cases
- **Includes**: UC-M2 (로그인), UC-P4 (기사 조회)
- **Related**: UC-P3 (기사 삭제)

### Notes
- **결정 테이블 참조**: business-logic-analysis.md의 "로직 2-1: 기사 수정/삭제 권한"
- **결정 테이블 참조**: business-logic-analysis.md의 "로직 3-2: 기사 정보 부분 수정"
- **프로세스 참조**: business-process-flows.md의 "프로세스 3: 저자의 기사 수정 여정"

### Issues
- **잠재적 문제**: 제목 변경 시 슬러그(URL)가 변경되어 기존 링크가 깨질 수 있음

---

## UC-P3: 기사 삭제

### Brief Description
저자가 자신이 발행한 기사를 플랫폼에서 삭제하는 과정

### Actors
- **Primary**: 저자 (Author)
- **Secondary**: 시스템 (System)

### Preconditions
- 저자가 로그인되어 있어야 함
- 삭제하려는 기사가 존재해야 함
- 저자가 해당 기사의 작성자여야 함

### Postconditions
- **Success**: 기사가 삭제됨, 관련 댓글과 좋아요도 삭제됨
- **Failure**: 삭제 실패, 오류 메시지 표시

### Basic Flow
1. 저자가 자신의 기사를 조회한다
2. 저자가 삭제 버튼을 클릭한다
3. 시스템이 삭제 확인 메시지를 표시한다
4. 저자가 삭제를 확인한다
5. 시스템이 저자 권한을 확인한다
6. 시스템이 기사를 삭제한다
7. 시스템이 관련 댓글을 삭제한다
8. 시스템이 관련 좋아요를 삭제한다
9. 시스템이 태그 색인을 업데이트한다
10. 시스템이 성공 응답을 반환한다
11. Use-Case 종료

### Alternative Flows

#### AF1: 기사가 존재하지 않음
- **Trigger**: Step 1에서 기사를 찾을 수 없는 경우
- **Flow**:
  1. 시스템이 "기사를 찾을 수 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

#### AF2: 권한 없음 (다른 저자의 기사)
- **Trigger**: Step 5에서 요청자가 기사 작성자가 아닌 경우
- **Flow**:
  1. 시스템이 "삭제 권한이 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

#### AF3: 삭제 취소
- **Trigger**: Step 4에서 저자가 삭제를 취소하는 경우
- **Flow**:
  1. 시스템이 삭제를 중단한다
  2. Use-Case 종료

### Business Rules
- **BR-P3.1**: 기사는 작성자만 삭제할 수 있음
- **BR-P3.2**: 기사 삭제 시 관련된 모든 댓글과 좋아요도 함께 삭제됨 (cascade delete)
- **BR-P3.3**: 삭제된 기사는 복구할 수 없음

### Special Requirements
- **SR-P3.1**: 삭제는 되돌릴 수 없으므로 확인 절차가 필요함

### Related Use Cases
- **Includes**: UC-M2 (로그인), UC-P4 (기사 조회)
- **Related**: UC-P2 (기사 수정)

### Notes
- **결정 테이블 참조**: business-logic-analysis.md의 "로직 2-1: 기사 수정/삭제 권한"

---

## UC-P4: 기사 조회

### Brief Description
사용자가 특정 기사의 상세 내용을 조회하는 과정

### Actors
- **Primary**: 방문자/독자/저자 (Visitor/Reader/Author)
- **Secondary**: 시스템 (System)

### Preconditions
- 조회하려는 기사가 존재해야 함

### Postconditions
- **Success**: 기사 내용이 표시됨
- **Failure**: 조회 실패, 오류 메시지 표시

### Basic Flow
1. 사용자가 기사 슬러그로 기사 조회를 요청한다
2. 시스템이 슬러그로 기사를 조회한다
3. 시스템이 저자 정보를 조회한다
4. 시스템이 좋아요 수를 집계한다
5. 시스템이 사용자의 좋아요 여부를 확인한다 (로그인한 경우)
6. 시스템이 기사 정보를 구성한다:
   - 제목, 설명, 본문
   - 슬러그
   - 태그 목록
   - 저자 정보 (사용자명, 프로필 이미지, 팔로우 여부)
   - 좋아요 수
   - 사용자의 좋아요 여부
   - 발행 시각, 수정 시각
7. 시스템이 기사 정보를 반환한다
8. Use-Case 종료

### Alternative Flows

#### AF1: 기사가 존재하지 않음
- **Trigger**: Step 2에서 슬러그로 기사를 찾을 수 없는 경우
- **Flow**:
  1. 시스템이 "기사를 찾을 수 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

#### AF2: 비로그인 상태에서 조회
- **Trigger**: 사용자가 로그인하지 않은 경우
- **Flow**:
  1. Step 5에서 좋아요 여부 확인을 건너뛴다
  2. Step 6에서 좋아요 여부를 false로 설정한다
  3. Step 6에서 팔로우 여부를 false로 설정한다
  4. Basic Flow를 계속 진행한다

### Business Rules
- **BR-P4.1**: 기사는 공개되어 있어 누구나 조회 가능함
- **BR-P4.2**: 좋아요 여부와 팔로우 여부는 로그인한 사용자에게만 의미가 있음

### Special Requirements
- 없음

### Related Use Cases
- **Extended by**: UC-P2 (기사 수정), UC-P3 (기사 삭제), UC-E1 (좋아요 표시), UC-E3 (댓글 작성)

### Notes
- **프로세스 참조**: business-process-flows.md의 "프로세스 2: 독자의 기사 소비 및 반응 여정"
