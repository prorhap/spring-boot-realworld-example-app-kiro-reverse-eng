# Use-Case Specifications - 회원 컨텍스트

## 개요

이 문서는 회원(Membership) 컨텍스트의 Use-Case 상세 명세를 Unified Process 표준에 따라 작성합니다.

---

## UC-M1: 회원 가입

### Brief Description
방문자가 플랫폼에 새로운 계정을 생성하여 회원이 되는 과정

### Actors
- **Primary**: 방문자 (Visitor)
- **Secondary**: 시스템 (System)

### Preconditions
- 방문자가 플랫폼에 접근 가능해야 함
- 이메일 주소를 보유하고 있어야 함

### Postconditions
- **Success**: 새로운 회원 계정이 생성됨, 인증 토큰이 발급됨
- **Failure**: 회원 가입 실패, 오류 메시지 표시

### Basic Flow
1. 방문자가 회원 가입 페이지에 접근한다
2. 시스템이 가입 양식을 표시한다
3. 방문자가 필수 정보를 입력한다:
   - 이메일 주소
   - 사용자명
   - 비밀번호
4. 방문자가 가입 버튼을 클릭한다
5. 시스템이 입력 정보의 유효성을 검증한다
6. 시스템이 이메일 중복 여부를 확인한다
7. 시스템이 사용자명 중복 여부를 확인한다
8. 시스템이 비밀번호를 암호화한다
9. 시스템이 기본 프로필 이미지를 할당한다
10. 시스템이 회원 정보를 저장한다
11. 시스템이 인증 토큰을 생성한다
12. 시스템이 회원 정보와 토큰을 반환한다
13. Use-Case 종료

### Alternative Flows

#### AF1: 이메일 중복
- **Trigger**: Step 6에서 이메일이 이미 사용 중인 경우
- **Flow**:
  1. 시스템이 "이메일이 이미 존재합니다" 오류 메시지를 표시한다
  2. Step 3으로 돌아간다

#### AF2: 사용자명 중복
- **Trigger**: Step 7에서 사용자명이 이미 사용 중인 경우
- **Flow**:
  1. 시스템이 "사용자명이 이미 존재합니다" 오류 메시지를 표시한다
  2. Step 3으로 돌아간다

#### AF3: 입력 정보 유효성 검증 실패
- **Trigger**: Step 5에서 필수 항목이 누락되거나 형식이 잘못된 경우
- **Flow**:
  1. 시스템이 구체적인 오류 메시지를 표시한다
     - "이메일 형식이 올바르지 않습니다"
     - "비밀번호는 최소 8자 이상이어야 합니다" (구현 시 정의)
  2. Step 3으로 돌아간다

### Business Rules
- **BR-M1.1**: 이메일은 플랫폼 전체에서 고유해야 함
- **BR-M1.2**: 사용자명은 플랫폼 전체에서 고유해야 함
- **BR-M1.3**: 비밀번호는 암호화되어 저장되어야 함
- **BR-M1.4**: 가입 시 기본 프로필 이미지가 자동으로 할당됨
- **BR-M1.5**: 자기소개(bio)는 빈 문자열로 초기화됨

### Special Requirements
- **SR-M1.1**: 비밀번호는 안전한 해시 알고리즘으로 암호화되어야 함
- **SR-M1.2**: 인증 토큰은 JWT 형식이어야 함

### Related Use Cases
- **Includes**: 없음
- **Extends**: 없음
- **Follows**: UC-M2 (로그인)

---

## UC-M2: 로그인

### Brief Description
회원이 이메일과 비밀번호를 사용하여 플랫폼에 인증하는 과정

### Actors
- **Primary**: 방문자 (Visitor)
- **Secondary**: 시스템 (System)

### Preconditions
- 회원 계정이 이미 존재해야 함

### Postconditions
- **Success**: 회원이 인증됨, 인증 토큰이 발급됨
- **Failure**: 로그인 실패, 오류 메시지 표시

### Basic Flow
1. 방문자가 로그인 페이지에 접근한다
2. 시스템이 로그인 양식을 표시한다
3. 방문자가 인증 정보를 입력한다:
   - 이메일 주소
   - 비밀번호
4. 방문자가 로그인 버튼을 클릭한다
5. 시스템이 이메일로 회원을 조회한다
6. 시스템이 입력된 비밀번호를 암호화하여 저장된 비밀번호와 비교한다
7. 시스템이 인증 토큰을 생성한다
8. 시스템이 회원 정보와 토큰을 반환한다
9. Use-Case 종료

### Alternative Flows

#### AF1: 이메일이 존재하지 않음
- **Trigger**: Step 5에서 이메일로 회원을 찾을 수 없는 경우
- **Flow**:
  1. 시스템이 "이메일 또는 비밀번호가 올바르지 않습니다" 오류 메시지를 표시한다
  2. Step 3으로 돌아간다

#### AF2: 비밀번호 불일치
- **Trigger**: Step 6에서 비밀번호가 일치하지 않는 경우
- **Flow**:
  1. 시스템이 "이메일 또는 비밀번호가 올바르지 않습니다" 오류 메시지를 표시한다
  2. Step 3으로 돌아간다

### Business Rules
- **BR-M2.1**: 보안을 위해 이메일과 비밀번호 오류를 구분하지 않음
- **BR-M2.2**: 인증 토큰은 일정 시간 후 만료됨

### Special Requirements
- **SR-M2.1**: 비밀번호는 평문으로 전송되지 않아야 함 (HTTPS 사용)
- **SR-M2.2**: 로그인 실패 시 구체적인 실패 원인을 노출하지 않아야 함 (보안)

### Related Use Cases
- **Included by**: 대부분의 인증이 필요한 Use-Case

---

## UC-M3: 프로필 수정

### Brief Description
회원이 자신의 프로필 정보를 업데이트하는 과정

### Actors
- **Primary**: 독자/저자 (Reader/Author)
- **Secondary**: 시스템 (System)

### Preconditions
- 회원이 로그인되어 있어야 함

### Postconditions
- **Success**: 프로필 정보가 업데이트됨
- **Failure**: 수정 실패, 오류 메시지 표시

### Basic Flow
1. 회원이 프로필 수정 페이지에 접근한다
2. 시스템이 현재 프로필 정보를 표시한다
3. 회원이 수정할 정보를 입력한다 (선택적):
   - 이메일 주소
   - 사용자명
   - 비밀번호
   - 자기소개
   - 프로필 이미지 URL
4. 회원이 저장 버튼을 클릭한다
5. 시스템이 변경된 항목을 식별한다
6. 시스템이 이메일 고유성을 검증한다 (이메일이 변경된 경우)
7. 시스템이 사용자명 고유성을 검증한다 (사용자명이 변경된 경우)
8. 시스템이 비밀번호를 암호화한다 (비밀번호가 변경된 경우)
9. 시스템이 변경된 항목만 업데이트한다
10. 시스템이 업데이트된 프로필 정보를 반환한다
11. Use-Case 종료

### Alternative Flows

#### AF1: 이메일 중복 (다른 회원이 사용 중)
- **Trigger**: Step 6에서 입력된 이메일을 다른 회원이 사용 중인 경우
- **Flow**:
  1. 시스템이 "이메일이 이미 존재합니다" 오류 메시지를 표시한다
  2. Step 3으로 돌아간다

#### AF2: 사용자명 중복 (다른 회원이 사용 중)
- **Trigger**: Step 7에서 입력된 사용자명을 다른 회원이 사용 중인 경우
- **Flow**:
  1. 시스템이 "사용자명이 이미 존재합니다" 오류 메시지를 표시한다
  2. Step 3으로 돌아간다

#### AF3: 자신의 기존 값으로 재설정
- **Trigger**: Step 6 또는 7에서 입력된 값이 자신의 현재 값과 동일한 경우
- **Flow**:
  1. 시스템이 검증을 통과시킨다 (오류 없음)
  2. Basic Flow를 계속 진행한다

#### AF4: 아무것도 변경하지 않음
- **Trigger**: Step 5에서 변경된 항목이 없는 경우
- **Flow**:
  1. 시스템이 데이터베이스 업데이트를 건너뛴다
  2. 시스템이 현재 프로필 정보를 반환한다
  3. Use-Case 종료

### Business Rules
- **BR-M3.1**: 이메일은 플랫폼 전체에서 고유해야 함 (자신의 기존 값 제외)
- **BR-M3.2**: 사용자명은 플랫폼 전체에서 고유해야 함 (자신의 기존 값 제외)
- **BR-M3.3**: 제공되지 않은 항목은 기존 값을 유지함 (부분 수정 지원)
- **BR-M3.4**: 빈 문자열은 "제공되지 않음"으로 간주됨

### Special Requirements
- **SR-M3.1**: 비밀번호 변경 시 재암호화되어야 함

### Related Use Cases
- **Includes**: UC-M2 (로그인)
- **Related**: UC-M4 (프로필 조회)

### Notes
- **결정 테이블 참조**: business-logic-analysis.md의 "로직 1: 회원 정보 수정 시 고유성 검증"
- **결정 테이블 참조**: business-logic-analysis.md의 "로직 3-1: 회원 정보 부분 수정"

---

## UC-M4: 프로필 조회

### Brief Description
회원이 다른 회원의 공개 프로필 정보를 조회하는 과정

### Actors
- **Primary**: 독자/저자 (Reader/Author)
- **Secondary**: 시스템 (System)

### Preconditions
- 조회하려는 회원이 존재해야 함

### Postconditions
- **Success**: 프로필 정보가 표시됨
- **Failure**: 조회 실패, 오류 메시지 표시

### Basic Flow
1. 회원이 특정 사용자명으로 프로필 조회를 요청한다
2. 시스템이 사용자명으로 회원을 조회한다
3. 시스템이 요청자와 대상 회원 간의 팔로우 관계를 확인한다
4. 시스템이 프로필 정보를 구성한다:
   - 사용자명
   - 자기소개
   - 프로필 이미지
   - 팔로우 여부 (요청자가 대상을 팔로우 중인지)
5. 시스템이 프로필 정보를 반환한다
6. Use-Case 종료

### Alternative Flows

#### AF1: 회원이 존재하지 않음
- **Trigger**: Step 2에서 사용자명으로 회원을 찾을 수 없는 경우
- **Flow**:
  1. 시스템이 "회원을 찾을 수 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

#### AF2: 비로그인 상태에서 조회
- **Trigger**: 요청자가 로그인하지 않은 경우
- **Flow**:
  1. Step 3에서 팔로우 관계 확인을 건너뛴다
  2. Step 4에서 팔로우 여부를 false로 설정한다
  3. Basic Flow를 계속 진행한다

### Business Rules
- **BR-M4.1**: 프로필 정보는 공개되어 있어 누구나 조회 가능함
- **BR-M4.2**: 팔로우 여부는 로그인한 회원에게만 의미가 있음

### Special Requirements
- 없음

### Related Use Cases
- **Extends**: UC-M5 (저자 팔로우), UC-M6 (저자 언팔로우)

---

## UC-M5: 저자 팔로우

### Brief Description
독자가 특정 저자를 팔로우하여 해당 저자의 새 기사를 피드에서 받아보는 과정

### Actors
- **Primary**: 독자 (Reader)
- **Secondary**: 시스템 (System)

### Preconditions
- 독자가 로그인되어 있어야 함
- 팔로우하려는 저자가 존재해야 함

### Postconditions
- **Success**: 팔로우 관계가 형성됨, 저자의 기사가 독자의 피드에 포함됨
- **Failure**: 팔로우 실패, 오류 메시지 표시

### Basic Flow
1. 독자가 특정 저자의 프로필에서 팔로우 버튼을 클릭한다
2. 시스템이 저자를 조회한다
3. 시스템이 팔로우 관계를 생성한다:
   - 팔로우하는 회원: 독자
   - 팔로우 대상: 저자
4. 시스템이 팔로우 관계를 저장한다
5. 시스템이 업데이트된 프로필 정보를 반환한다 (following: true)
6. Use-Case 종료

### Alternative Flows

#### AF1: 저자가 존재하지 않음
- **Trigger**: Step 2에서 저자를 찾을 수 없는 경우
- **Flow**:
  1. 시스템이 "회원을 찾을 수 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

#### AF2: 이미 팔로우 중
- **Trigger**: 독자가 이미 해당 저자를 팔로우 중인 경우
- **Flow**:
  1. 시스템이 중복 팔로우를 무시한다 (오류 없음)
  2. 시스템이 현재 프로필 정보를 반환한다 (following: true)
  3. Use-Case 종료

### Business Rules
- **BR-M5.1**: 팔로우 관계는 단방향임 (A가 B를 팔로우해도 B가 A를 자동으로 팔로우하지 않음)
- **BR-M5.2**: 자기 자신을 팔로우할 수 없음 (현재 미구현)
- **BR-M5.3**: 중복 팔로우는 무시됨

### Special Requirements
- 없음

### Related Use Cases
- **Includes**: UC-M2 (로그인)
- **Extends**: UC-M4 (프로필 조회)
- **Related**: UC-C1 (피드 조회)

---

## UC-M6: 저자 언팔로우

### Brief Description
독자가 팔로우 중인 저자를 언팔로우하여 해당 저자의 기사를 더 이상 피드에서 받지 않는 과정

### Actors
- **Primary**: 독자 (Reader)
- **Secondary**: 시스템 (System)

### Preconditions
- 독자가 로그인되어 있어야 함
- 언팔로우하려는 저자가 존재해야 함
- 독자가 해당 저자를 팔로우 중이어야 함

### Basic Flow
1. 독자가 특정 저자의 프로필에서 언팔로우 버튼을 클릭한다
2. 시스템이 저자를 조회한다
3. 시스템이 팔로우 관계를 조회한다
4. 시스템이 팔로우 관계를 삭제한다
5. 시스템이 업데이트된 프로필 정보를 반환한다 (following: false)
6. Use-Case 종료

### Alternative Flows

#### AF1: 저자가 존재하지 않음
- **Trigger**: Step 2에서 저자를 찾을 수 없는 경우
- **Flow**:
  1. 시스템이 "회원을 찾을 수 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

#### AF2: 팔로우 관계가 존재하지 않음
- **Trigger**: Step 3에서 팔로우 관계를 찾을 수 없는 경우
- **Flow**:
  1. 시스템이 "팔로우 관계를 찾을 수 없습니다" 오류 메시지를 표시한다
  2. Use-Case 종료

### Business Rules
- **BR-M6.1**: 팔로우하지 않은 저자는 언팔로우할 수 없음

### Special Requirements
- 없음

### Related Use Cases
- **Includes**: UC-M2 (로그인)
- **Extends**: UC-M4 (프로필 조회)
- **Related**: UC-C1 (피드 조회)
